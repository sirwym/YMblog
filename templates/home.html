{% extends "base.html" %}
{% load static %}
{% block content %}

    <div class="hero min-h-[400px] rounded-box mb-12 bg-gradient-to-br from-base-200 to-base-300 relative overflow-hidden">
        <div class="absolute -top-20 -left-20 w-64 h-64 bg-primary/10 rounded-full blur-3xl"></div>
        <div class="absolute -bottom-20 -right-20 w-64 h-64 bg-secondary/10 rounded-full blur-3xl"></div>

        {% include "components/home_hero.html" %}
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

        <div class="lg:col-span-2 space-y-8">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-2xl font-bold border-l-4 border-primary pl-3">æœ€æ–°å‘å¸ƒ</h2>
                <a href="{% url 'blog:post_list' %}" class="link link-hover text-sm opacity-60">æŸ¥çœ‹å½’æ¡£ â†’</a>
            </div>

            {% if recent_posts %}
                <div class="grid gap-6">
                    {% for post in recent_posts %}
                        <div class="card card-side bg-base-100 shadow-sm border border-base-200 hover:shadow-md transition-all duration-300 group">
                            <div class="card-body">
                                <div class="flex items-center gap-2 text-xs opacity-60 mb-1">
                                    <span>{{ post.published_at|date:"Y-m-d" }}</span>
                                    {% if post.category %}
                                        <span class="badge badge-xs badge-neutral">{{ post.category.name }}</span>
                                    {% endif %}
                                </div>

                                <h3 class="card-title text-xl group-hover:text-primary transition-colors">
                                    <a href="{% url 'blog:post_detail' post.slug %}">
                                        {{ post.title }}
                                    </a>
                                </h3>

                                <p class="text-sm opacity-70 line-clamp-2">
                                    {{ post.excerpt|default:"æš‚æ— æ‘˜è¦ï¼Œç‚¹å‡»é˜…è¯»å…¨æ–‡..." }}
                                </p>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="alert bg-base-100 border-base-200">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-info shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <span>æ•™ç»ƒæ­£åœ¨æ•´ç†ç®—æ³•é¢˜è§£ï¼Œç¨åå‘å¸ƒ...</span>
                </div>
            {% endif %}
        </div>

        <div class="space-y-8">

            <div class="card bg-base-100 shadow-xl overflow-hidden group relative w-full h-64 md:h-80">
                <figure class="absolute inset-0 w-full h-full">
                    <img src="{% static 'img/default-game.avif' %}"
                         alt="Game Workshop"
                         loading="lazy"
                         class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" />

                    <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"></div>
                </figure>
                <div class="card-body card-compact relative z-10 h-full flex flex-col p-6">

                    <h2 class="card-title text-white flex items-center gap-2 drop-shadow-md text-xl">
                        <span class="text-2xl">ğŸ®</span>
                        <span>TurboWarp å·¥åŠ</span>
                    </h2>

                    <div class="flex-1 overflow-hidden mt-2">
                        {% if recent_games %}
                            <ul class="menu bg-black/40 backdrop-blur-md rounded-box text-white border border-white/10 w-full max-h-[140px] overflow-y-auto custom-scrollbar">
                                {% for game in recent_games|slice:":3" %} <li>
                                    <a href="{% url 'game:game_detail' game.slug %}" class="flex justify-between hover:bg-white/20 py-2">
                                        <span class="truncate max-w-[120px] text-xs opacity-90">{{ game.title }}</span>
                                        <span class="badge badge-xs badge-accent opacity-80">Play</span>
                                    </a>
                                </li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            <div class="text-white/90 text-sm drop-shadow-md mt-2 space-y-1">
                                <p>åŸºäº TurboWarp (Scratch) ç¼–è¯‘ã€‚</p>
                                <p class="opacity-70 text-xs">æ— éœ€å®‰è£…ï¼Œç‚¹å¼€å³ç©ã€‚</p>
                            </div>
                        {% endif %}
                    </div>

                    <div class="card-actions justify-end mt-auto">
                        <a href="{% url 'game:game_list' %}" class="btn btn-sm btn-ghost text-white hover:bg-white/20 border border-white/30 backdrop-blur-sm">
                            è¿›å…¥å·¥åŠ â†’
                        </a>
                    </div>
                </div>
            </div>

            <div class="card bg-base-100 shadow-sm border border-base-200">
                <div class="card-body">
                    <h3 class="font-bold text-lg mb-4">æŠ€æœ¯ä¸å·¥å…·</h3>
                    <div class="flex flex-wrap gap-2">
                        <div class="badge badge-primary badge-outline">C++ / STL</div>
                        <div class="badge badge-primary badge-outline">ç®—æ³•ç«èµ›</div>
                        <div class="badge badge-secondary badge-outline">Python</div>
                        <div class="badge badge-accent badge-outline">TurboWarp</div>

                        <div class="badge badge-outline">Linux</div>
                        <div class="badge badge-outline">Django</div>
                        <div class="badge badge-outline">JavaScript</div>
                    </div>
                </div>
            </div>

            <div class="card bg-base-200">
                <div class="card-body">
                    <h3 class="font-bold">è®¢é˜…é¢˜è§£</h3>
                    <p class="text-xs opacity-70 mb-2">è·å–æœ€æ–°çš„ CSP-J/S é¢˜è§£ä¸ç®—æ³•æŠ€å·§æ¨é€ã€‚</p>
                    <div class="join w-full">
                        <input class="input input-bordered join-item w-full input-sm" placeholder="é‚®ç®±åœ°å€"/>
                        <button class="btn btn-primary join-item btn-sm">è®¢é˜…</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

{% endblock %}